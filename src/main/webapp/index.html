<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Java Enterprise (Topjava)</title>
</head>
<body>
<h3>Проект <a href="https://github.com/JavaWebinar/topjava" target="_blank">Java Enterprise (Topjava)</a></h3>
<div style="font-size: large">
    <hr>
    <label for="user_select">
        Выберите пользователя:
    </label>
    <select id="user_select" name="selector">
        <option value="1" selected>User1</option>
        <option value="2">User2</option>
    </select>
    <button type="button" onclick="setUserId()" value="Apply">Apply</button>
    <hr>
    <ul>
        <li><a href="users">Users</a></li>
        <li><a id="usersUrl" href="meals">Meals</a></li>
    </ul>
</div>
</body>
<script>
    function setUserId() {
        let userId = document.getElementById("user_select").value;
        let path = window.location.pathname;
        const parts = path.split('/');
        parts.pop();
        path = parts.join('/');
        $.ajax({
            url: path + "/users",
            type: "post",
            data: {
                id : userId,
            },
            success: function () {
                window.location.href = path + "/meals";
            }
        });
    }
</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
</html>
